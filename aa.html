<!DOCTYPE html>
<html>
<head>
  <title>Productos</title>
</head>
<body>
    <div>asaasd</div>
    <div id="filtro-container">
        <button class="filtro-btn" data-categoria="analisis">Análisis</button>
        <button class="filtro-btn" data-categoria="sistemas">Sistemas</button>
        <button class="filtro-btn" data-categoria="ofimatica">Ofimática</button>
        <button id="todos-btn">Mostrar todos</button>
        <link rel="stylesheet" href="style.css">
      </div>
      
      <div id="productos-container" class="contenedor" id="app">
        <!-- Aquí se mostrarán los productos -->
      </div>

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>

    
function obtenerProductos(categoria) {
  axios.get('https://francocir.pythonanywhere.com/productos')
    .then(response => {
      const productos = response.data;

      if (categoria) {
        const productosFiltrados = productos.filter(producto => {
          for (const campo in producto) {
            if (producto[campo].toString().includes(categoria)) {
              return true;
            }
          }
          return false;
        });
        mostrarProductos(productosFiltrados);
      } else {
        mostrarProductos(productos);
      }
    })
    .catch(error => {
      console.error(error);
    });
}

function mostrarProductos(productos) {
  const productosContainer = document.getElementById('productos-container');

  productosContainer.innerHTML = '';

  productos.forEach(producto => {
    const productoElement = document.createElement('div');
    productoElement.classList.add('card');

    const frontElement = document.createElement('div');
    frontElement.classList.add('front');
    frontElement.innerHTML = `
      <span class="vacio"></span>
      <span class="contendoricono">
        <span class="icono">
          <img src="${producto.icono}" alt="">
        </span>
      </span>
      <span class="nombre">
        <p>${producto.nombre}</p>
      </span>
      <span class="version">
        <p>${producto.version}<span style="display: none;">${producto.id}</span></p>
      </span>
    `;

    const backElement = document.createElement('div');
    backElement.classList.add('back');
    backElement.innerHTML = `
      <span class="barraback">
        <img class="icono2" src="${producto.icono}" alt="">
        <span class="contenedorbotones" style="display: none;">
          <button class="botones">
            <a class="botonesa" href="neweditar/edito.html?id=${producto.id}">
              <img class="imagenboton" src="imagenes/lapiz.png">
            </a>
          </button>
          <button class="botones" onclick="eliminarProducto(${producto.id})">
            <img class="imagenboton" src="imagenes/eliminar.png" alt="">
          </button>
        </span>
      </span>
      <span class="descripcion">
        ${producto.descripcion}
      </span>
      <span class="contenedorboton">
        <a class="linkboton" href="${producto.url}"><button class="lin">URL</button></a>
      </span>
    `;

    productoElement.appendChild(frontElement);
    productoElement.appendChild(backElement);

    productosContainer.appendChild(productoElement);
  });
}

// Obtener y mostrar todos los productos al cargar la página
obtenerProductos(null);

// Agregar event listeners a los botones de filtro
const filtroButtons = document.querySelectorAll('.filtro-btn');
filtroButtons.forEach(button => {
  button.addEventListener('click', function() {
    const categoria = this.getAttribute('data-categoria');
    obtenerProductos(categoria);
  });
});

// Agregar event listener al botón "Mostrar todos"
const todosBtn = document.getElementById('todos-btn');
todosBtn.addEventListener('click', function() {
  obtenerProductos(null);
});



  </script>
</body>
</html>
